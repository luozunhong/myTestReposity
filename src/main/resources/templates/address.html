<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:c="http://www.w3.org/1999/html">
<head>
  <!-- set the encoding of your site -->
  <meta charset="utf-8">
  <!-- set the viewport width and initial-scale on mobile devices -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>地址管理</title>
	<div th:include="aashare::look"></div>
</head>
<body>
		<div class="center">
			<div class="col-main">
				<div class="main-wrap">
					<div class="user-address">
						<!--标题 -->
						<div class="am-cf am-padding">
							<div class="am-fl am-cf"><strong class="am-text-danger am-text-lg">地址管理</strong> / <small>Address&nbsp;list</small></div>
						</div>
						<hr/>
						<ul class="am-avg-sm-1 am-avg-md-3 am-thumbnails">
                            <form  type="button">


							<li class="user-addresslist defaultAddr" th:each="add:${isdefault}">
								<span class="new-option-r"><i class="am-icon-check-circle"></i>默认地址</span>
								<p class="new-tit new-p-re">
									<span class="new-txt">[[${add.consignee}]]</span>
									<span class="new-txt-rd2">[[${add.phone}]]</span>
								</p>
								<div class="new-mu_l2a new-p-re">
									<p class="new-mu_l2cw">
                                        <!--<input id="ship" type="hidden" name="shipId" th:value="${add.shipId}">-->
                                        <span class="title">地址：</span>
                                        <input type="hidden"  name="shipId" th:value="${add.shipId}">
										<span class="province" type="text" >[[${add.province}]]</span>省
										<span  class="city">[[${add.city}]]</span>市
										<span  class="dist">[[${add.area}]]</span>区<br>详细地址:
										<span  class="street">[[${add.address}]]</span></p>
								</div>
								<div class="new-addr-btn">
                                    <a href="javascript:void(0)"  th:onclick="|typessx(${add.shipId})|" th:text="编辑" ></a>
									<!--<a href="#" type="button" id="bianji"><i class="am-icon-edit"></i>编辑</a>-->
									<span class="new-addr-bar">|</span>
									<a href="javascript:void(0);" th:onclick="|shanchu(${add.shipId})|"><i class="am-icon-trash"></i>删除</a>
								</div>
							</li>
                                <li class="user-addresslist" th:each="address:${furaddress}">
                                    <span class="new-option-r" th:onclick="|moren(${address.getShipId()})|"><i class="am-icon-check-circle"></i>默认地址</span>
                                    <p class="new-tit new-p-re">
                                        <span class="new-txt">[[${address.consignee}]]</span>
                                        <span class="new-txt-rd2">[[${address.phone}]]</span>
                                    </p>
                                    <div class="new-mu_l2a new-p-re">
                                        <p class="new-mu_l2cw">
                                            <input  type="hidden" name="shipId" th:value="${address.shipId}">

                                            <span class="title">地址：</span>
                                            <span class="province" type="text" >[[${address.province}]]</span>省
                                            <span  class="city">[[${address.city}]]</span>市
                                            <span  class="dist">[[${address.area}]]</span>区<br>详细地址:
                                            <span  class="street">[[${address.address}]]</span></p>
                                    </div>
                                    <div class="new-addr-btn">
                                        <a href="javascript:void(0)"  th:onclick="|typessx(${address.getShipId()})|" th:text="编辑" ></a>
                                        <!--<button class="layui-btn" id="bianji" th:onclick="xadmin.open('添加商品','addressadd',600,400)"><i class="layui-icon"></i>编辑</button>-->
                                        <!--<a href="#" type="button" id="bianji"><i class="am-icon-edit"></i>编辑</a>-->
                                        <span class="new-addr-bar">|</span>
                                        <a href="javascript:void(0);" th:onclick="|shanchu(${address.getShipId()})|"><i class="am-icon-trash"></i>删除</a>
                                    </div>
                                </li>
                            </form>


							<!--<li class="user-addresslist">
								<span class="new-option-r"><i class="am-icon-check-circle"></i>设为默认</span>
								<p class="new-tit new-p-re">
									<span class="new-txt">小叮当</span>
									<span class="new-txt-rd2">159****1622</span>
								</p>
								<div class="new-mu_l2a new-p-re">
									<p class="new-mu_l2cw">
										<span class="title">地址：</span>
										<span class="province">湖北</span>省
										<span class="city">武汉</span>市
										<span class="dist">洪山</span>区
										<span class="street">雄楚大道666号(中南财经政法大学)</span></p>
								</div>
								<div class="new-addr-btn">
									<a href="#"><i class="am-icon-edit"></i>编辑</a>
									<span class="new-addr-bar">|</span>
									<a href="javascript:void(0);" onClick="delClick(this);"><i class="am-icon-trash"></i>删除</a>
								</div>
							</li>
							<li class="user-addresslist">
								<span class="new-option-r"><i class="am-icon-check-circle"></i>设为默认</span>
								<p class="new-tit new-p-re">
									<span class="new-txt">小叮当</span>
									<span class="new-txt-rd2">159****1622</span>
								</p>
								<div class="new-mu_l2a new-p-re">
									<p class="new-mu_l2cw">
										<span class="title">地址：</span>
										<span class="province">湖北</span>省
										<span class="city">武汉</span>市
										<span class="dist">洪山</span>区
										<span class="street">雄楚大道666号(中南财经政法大学)</span></p>
								</div>
								<div class="new-addr-btn">
									<a href="#"><i class="am-icon-edit"></i>编辑</a>
									<span class="new-addr-bar">|</span>
									<a href="javascript:void(0);" onClick="delClick(this);"><i class="am-icon-trash"></i>删除</a>
								</div>
							</li>-->
						</ul>
						<div class="clear"></div>
						<a class="new-abtn-type" data-am-modal="{target: '#doc-modal-1', closeViaDimmer: 0}">添加新地址</a>
						<!--例子-->
						<div class="am-modal am-modal-no-btn" id="doc-modal-1">

							<div class="add-dress">

								<!--标题 -->
								<div class="am-cf am-padding">
									<div class="am-fl am-cf"><strong class="am-text-danger am-text-lg">新增地址</strong> / <small>Add&nbsp;address</small></div>
								</div>
								<hr/>

								<div  id="xgdz" class="am-u-md-12 am-u-lg-8" style="margin-top: 20px;">
                                    <form  th:action="@{/addres}" method="post" class="am-form am-form-horizontal">

                                        <div class="am-form-group">
                                            <label for="user-name" class="am-form-label">收货人</label>
                                            <div class="am-form-content">
                                                <input type="text" name="consignee" id="user-name"  placeholder="收货人">

                                            </div>
                                        </div>

                                        <div class="am-form-group">
                                            <label for="user-phone" class="am-form-label">手机号码</label>
                                            <div class="am-form-content">
                                                <input id="user-phone"  name="phone" placeholder="手机号必填" type="text">
                                            </div>
                                        </div>
                                        <div class="am-form-group">
                                            <label  class="am-form-label">所在地</label>
                                            <div class="am-form-content address">
                                                <select name="province" id="province">
                                                    <option>--选择省份--</option>
                                                </select>
                                                <select name="city"  id="city">
                                                    <option>--选择城市--</option>
                                                </select>
                                                <select name="area" id="area">
                                                    <option>--选择县--</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="am-form-group">
                                            <label for="user-intro" class="am-form-label">详细地址</label>
                                            <div class="am-form-content">
                                                <textarea  class="" rows="3" name="address" id="user-intro" placeholder="输入详细地址"></textarea>
                                                <small>100字以内写出你的详细地址...</small>
                                            </div>
                                        </div>
                                        <br>

                                        <div class="am-form-group">
                                            <div class="am-u-sm-9 am-u-sm-push-3">
                                                <a type="button"  id="address" class="am-btn am-btn-danger">保存</a>
                                                <a href="javascript: void(0)" type="cancel" class="am-close am-btn am-btn-danger" data-am-modal-close>取消</a>
                                            </div>
                                        </div>
                                        <!--<input class="am-btn am-btn-danger" type="submit" value="提交">-->
                                    </form>

								</div>

							</div>

						</div>

					</div>

					<script type="text/javascript">
                        $(function () {


                            $("#address").click(function () {
                                $.post(base + "/addres",{
                                    consignee: $("#user-name").val(),
                                    phone: $("#user-phone").val(),
                                    province: $("#province").val(),
                                    city: $("#city").val(),
                                    area: $("#area").val(),
                                    address: $("#user-intro").val()
                                },function (data) {
                                    alert(data)
                                    $('#empData').load(base+"/address");
                                });
                            });
                        });

                        function moren(id) {
                            $.post(base + "/moren",{
                               id:id,
                            },function (data) {
                                alert(data);
                            });
                        }
                        function shanchu(id) {
                            $.post(base + "/shanchu",{
                                id:id,
                            },function (data) {
                                alert(data)
                                $('#empData').load(base+"/address");
                            });
                        }

                        function typessx(id){

                                $("#xgdz").load(base+"/edit/"+id)
                        }
                        function typesss(id){
                            window.location=base+"/edit/"+id;

                            $("#xgdz").load(base+"/edit/"+id)
                        }


						$(document).ready(function() {
							$(".new-option-r").click(function() {
								$(this).parent('.user-addresslist').addClass("defaultAddr").siblings().removeClass("defaultAddr");
							});

							var $ww = $(window).width();
							if($ww>640) {
								$("#doc-modal-1").removeClass("am-modal am-modal-no-btn")
							}

						})
					</script>

					<div class="clear"></div>

				</div>
			</div>
		</div>

<div th:include="aashare::foots"></div>
</body>
<body>


<script th:src="@{/asserts/js/jquery-1.10.2.min.js}" ></script>
<script>
    $(function () {
        $.ajax({
            url: base + "/ssxjl/getProvince",
            dataType: "json",
            success: function (data) {
                $.each(data, function (i, obj) {
                    $("#province").append("<option value='" + obj.code + "'>" + obj.name + "</option>");
                });
            }
        });


        $("#province").change(function(){
            $("#city").empty().html("<option>---请选择城市---</option>");
            $("#area").empty().html("<option>---请选择区域---</option>");
            $.ajax({
                url: base + "/ssxjl/getCity?code=" + $("#province").val(),
                dataType: "json",
                success: function (data) {
                    $.each(data, function (i, obj) {
                        $("#city").append("<option value='" + obj.code + "'>" + obj.name + "</option>");
                    });
                }
            });
        });

        $("#city").change(function(){
            $("#area").empty().html("<option>---请选择区域---</option>");
            $.ajax({
                url: base+ "/ssxjl/getArea?code=" + $("#city").val(),
                dataType: "json",
                success: function (data) {
                    $.each(data, function (i, obj) {
                        $("#area").append("<option value='" + obj.code + "'>" + obj.name + "</option>");
                    });
                }
            });
        });
    });
</script>
</body>
</html>